<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Explorer by FIPS Code</title>
</head>
<body>
    <h1>Plant Explorer by FIPS Code</h1>
    <div>
        <label for="fipsInput">Enter FIPS Code:</label>
        <input type="text" id="fipsInput" placeholder="e.g., 06">
        <button onclick="searchPlantsByFIPS()">Search</button>
    </div>
    <div id="plant-list"></div>

    <script>
        async function fetchPlantsByFIPS(fipsCode) {
            const url = new URL('https://plants10.p.rapidapi.com/plants/states');
            url.searchParams.append('limit', '100');
            url.searchParams.append('fips_code', fipsCode);
            
            const settings = {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': 'b8a5eb0b05mshc8a16a1d011542ep156953jsn216ef51bf7ec',
                    'X-RapidAPI-Host': 'plants10.p.rapidapi.com'
                }
            };

            try {
                const response = await fetch(url, settings);
                const data = await response.json();
                return data.data;
            } catch (error) {
                console.error('Error fetching data:', error);
                return [];
            }
        }

        async function displayPlants(plantData) {
            const plantListElement = document.getElementById('plant-list');
            plantListElement.innerHTML = ''; // Clear previous data
            
            plantData.forEach(plant => {
                const plantHTML = `
                    <div>
                        <h2>${plant.common_name || plant.scientific_name}</h2>
                        <p>FIPS Code: ${plant.fips_code}</p>
                        <p>Details:</p>
                        <pre>${JSON.stringify(plant, null, 2)}</pre>
                    </div>
                `;
                plantListElement.insertAdjacentHTML('beforeend', plantHTML);
            });
        }

        async function searchPlantsByFIPS() {
            const fipsCode = document.getElementById('fipsInput').value.trim();
            if (fipsCode) {
                const plantData = await fetchPlantsByFIPS(fipsCode);
                displayPlants(plantData);
            } else {
                alert('Please enter a FIPS code.');
            }
        }
    </script>
</body>
</html>
